<!DOCTYPE html><html lang="ja"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/112d7583d07c4f20.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/fb457670bfaeafb0.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-2e7fd9e6f08beff7.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-cc48c28d170fddc2.js" async="" crossorigin=""></script><script src="/_next/static/chunks/655-b35b9be00897c2ee.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-8ee39eeb7db36ac8.js" async="" crossorigin=""></script><script src="/_next/static/chunks/250-d7e0a94ebe194dac.js" async=""></script><script src="/_next/static/chunks/app/(blog)/layout-4dbe9f485cf84522.js" async=""></script><title>Next.jsを使って静的なブログサイトを作成する(1)</title><meta name="description" content="コンピュータその他いろいろ"/><meta property="og:title" content="Next.jsを使って静的なブログサイトを作成する(1)"/><meta property="og:description" content="コンピュータその他いろいろ"/><meta property="og:image" content="https://www.sammaya.jp/assets/img/hero/hong-kong.jpg"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Next.jsを使って静的なブログサイトを作成する(1)"/><meta name="twitter:description" content="コンピュータその他いろいろ"/><meta name="twitter:image" content="https://www.sammaya.jp/assets/img/hero/hong-kong.jpg"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body class="__className_aaf875"><div class="min-h-screen"><header class="top-0 w-full py-6"><div class="items-center p-4 justify-between flex"><div class="outer-title flex items-center"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="crow" class="svg-inline--fa fa-crow px-4 h-7 text-slate-400" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="currentColor" d="M456 0c-48.6 0-88 39.4-88 88v29.2L12.5 390.6c-14 10.8-16.6 30.9-5.9 44.9s30.9 16.6 44.9 5.9L126.1 384H259.2l46.6 113.1c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3L311.1 384H352c1.1 0 2.1 0 3.2 0l46.6 113.2c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3l-42-102C484.9 354.1 544 280 544 192V128v-8l80.5-20.1c8.6-2.1 13.8-10.8 11.6-19.4C629 52 603.4 32 574 32H523.9C507.7 12.5 483.3 0 456 0zm0 64a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"></path></svg><a class="hover:underline text-4xl font-bold" href="/">さんまや</a></div><input id="nav-input" type="checkbox" class="peer/link hidden"/><nav class="hidden fixed text-lg font-bold right-0 top-20 p-3 peer-checked/link:block z-20"><ul class="block text-slate-200 bg-[#333]"><li class="p-2 hover:underline"><a href="/">さんまや</a></li><li class="p-2 hover:underline"><a href="/vbscript">VBScriptさんま屋</a></li></ul></nav><label for="nav-input" class="block peer-checked/link:hidden"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" class="svg-inline--fa fa-bars h-10 w-10" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"></path></svg></label><label for="nav-input" class="hidden peer-checked/link:block fixed right-4 z-30"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="xmark" class="svg-inline--fa fa-xmark h-10 w-10" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"></path></svg></label></div></header><main><div class="container mx-auto py-5 px-5"><article class="mb-32"><h1 class=" text-slate-400 text-5xl md:text-7xl lg:text-8xl  font-bold tracking-tighter leading-tight md:leading-none mb-12 ">Next.jsを使って静的なブログサイトを作成する(1)</h1><div class="max-w-2xl mx-auto"><div class="mb-6 text-lg"><time dateTime="2024-06-10T23:00:00.000Z">2024-06-11</time></div></div><div class="max-w-2xl mx-auto"><div class="markdown-styles_markdown__ORfR8"><nav class="toc"><ol class="toc-level toc-level-1"><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#はじめに">はじめに</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#nodejsをインストールする">Node.jsをインストールする</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#nextプロジェクトを作成して表示する">Nextプロジェクトを作成して表示する</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#記事を追加してみる">記事を追加してみる</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#metadata">Metadata</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#ビルド">ビルド</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#静的エクスポート">静的エクスポート</a></li><li class="toc-item toc-item-h2"><a class="toc-link toc-link-h2" href="#デプロイ">デプロイ</a></li></ol></nav><h2 id="はじめに">はじめに</h2>
<p><a href="https://nextjs.org/">Next.js</a> の <a href="https://vercel.com/templates/next.js/blog-starter-kit">Blog Starter Kit</a> を使ったブログサイト作成手順のメモです。<br>
一般のレンタルサーバにアップロード可能な静的コンテンツを作成します。</p>
<h3 id="私の環境">私の環境</h3>
<ul>
<li>OS: Windows 11 Home</li>
<li>ターミナル: PowerShell(v7.4.2)</li>
<li>エディタ: Visual Studio Code</li>
<li>Node.js: v20.12.2</li>
</ul>
<h3 id="blog-starter-kit-とは">Blog Starter Kit とは</h3>
<p>Next.jsには様々な<a href="https://vercel.com/templates/next.js">テンプレート</a>が用意されており、<code>Blog Starter Kit</code> はブログ作成用テンプレートの一つです。簡易なマークダウンと<code>Tailwind CSS</code>が使えます。</p>
<h2 id="nodejsをインストールする">Node.jsをインストールする</h2>
<p>以下の手順で、Node.jsをインストールします。</p>
<ol>
<li><a href="https://nodejs.org">https://nodejs.org</a> を表示します。</li>
<li>メニューの <code>download</code> をクリックします。</li>
<li><code>Prebuilt Binaries</code> をクリックします。</li>
<li>最新のLTSバージョン(今回はv20.12.2)、Windows、x64を選択します。</li>
<li><code>Download Node.js</code> をクリックします。</li>
<li>ダウンロードしたZIPファイルを展開します。</li>
<li>展開したフォルダを適当な場所へ配置します。ここではCドライブ直下に配置します。「C:\node-v20.12.2-win-x64」直下にnode.exeが存在する状態です。</li>
<li>Windowsの検索ボックスに <code>システムの</code> と入力します。</li>
<li>表示された <code>システムの詳細設定の表示</code> をクリックします。</li>
<li><code>環境変数</code> をクリックします。</li>
<li>下側にあるシステム環境変数の <code>Path</code> を選択して <code>編集</code> をクリックします。</li>
<li><code>新規</code> をクリックして先ほどのフォルダのパスを入力します。ここでは「C:\node-v20.12.2-win-x64」を入力します。</li>
<li>OKをクリックします。</li>
<li>ターミナルを起動します。</li>
<li>下記コマンドによりバージョンが表示されれば成功です。</li>
</ol>
<pre><code class="hljs language-shell"><span class="hljs-meta prompt_">> </span><span class="bash">node -v</span>
v20.12.2
<span class="hljs-meta prompt_">> </span><span class="bash">npm -v</span>
10.5.0
</code></pre>
<h2 id="nextプロジェクトを作成して表示する">Nextプロジェクトを作成して表示する</h2>
<p>適当なフォルダへ移動します。</p>
<pre><code class="hljs language-bash">> <span class="hljs-built_in">cd</span> c:\website
</code></pre>
<p>プロジェクトを作成します。</p>
<pre><code class="hljs language-shell"><span class="hljs-meta prompt_">> </span><span class="bash">npx create-next-app --example blog-starter blog_starter_app</span>
</code></pre>
<p>パッケージのインストールが必要と言われたら yes を回答します。</p>
<p>作成されたフォルダへ移動します。</p>
<pre><code class="hljs language-js">> cd blog_starter_app
</code></pre>
<p>開発モードで実行します。</p>
<pre><code class="hljs language-js">> npx next dev
</code></pre>
<p>ブラウザで<code>http://localhost:3000</code>を表示して画面を確認してください。</p>
<h2 id="記事を追加してみる">記事を追加してみる</h2>
<p>プロジェクトのフォルダ内はこのようになってます。</p>
<pre><code class="hljs language-bash">BLOG_STARTER_APP
│  .gitignore
│  next-env.d.ts
│  package-lock.json
│  package.json
│  postcss.config.js
│  README.md
│  tailwind.config.ts
│  tsconfig.json
│
├─node_modules
│  └─(省略)
│
├─public
│  └─(省略)
│
├─src
│  └─(省略)
│
└─_posts
        dynamic-routing.md
        hello-world.md
        preview.md
</code></pre>
<p>「_posts」フォルダ内に拡張子.mdのファイルを作成すると記事が追加されます。<br>
サンプル記事が入ってますのでこれらを参考に記事を追加します。</p>
<pre><code class="hljs language-js">---
<span class="hljs-attr">title</span>: <span class="hljs-string">"九龍風水傳"</span>
<span class="hljs-attr">coverImage</span>: <span class="hljs-string">"/assets/blog/preview/cover.jpg"</span>
<span class="hljs-attr">date</span>: <span class="hljs-string">"1997-05-22T"</span>
<span class="hljs-attr">author</span>:
  <span class="hljs-attr">name</span>: <span class="hljs-string">"阿J"</span>
  <span class="hljs-attr">picture</span>: <span class="hljs-string">"/assets/blog/authors/jj.jpeg"</span>
<span class="hljs-attr">ogImage</span>:
  <span class="hljs-attr">url</span>: <span class="hljs-string">"/img/gate.jpeg"</span>
---

## ファイアの日

</code></pre>
<p>ブラウザをリロードして記事が追加されたことを確認してください。</p>
<h2 id="metadata">Metadata</h2>
<p>ところで、ターミナルを確認すると下記のようなエラーが表示されていると思います。</p>
<p>metadata.metadataBase is not set for resolving social open graph or twitter images, using "<a href="http://localhost:3000">http://localhost:3000</a>". See <a href="https://nextjs.org/docs/app/api-reference/functions/generate-metadata#metadatabase">https://nextjs.org/docs/app/api-reference/functions/generate-metadata#metadatabase</a></p>
<p>リンク先をヒントに「src/app/layout.tsx」を編集します。<br>
編集前はこうなってます。</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">metadata</span>: <span class="hljs-title class_">Metadata</span> = {
  <span class="hljs-attr">title</span>: <span class="hljs-string">`Next.js Blog Example with <span class="hljs-subst">${CMS_NAME}</span>`</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">`A statically generated blog example using Next.js and <span class="hljs-subst">${CMS_NAME}</span>.`</span>,
  <span class="hljs-attr">openGraph</span>: {
    <span class="hljs-attr">images</span>: [<span class="hljs-variable constant_">HOME_OG_IMAGE_URL</span>],
  },
};
</code></pre>
<p>metadataBaseの行を追加し、title、description、imagesも編集します。<br>
以下は例です。値は各自のサイトに合わせて編集してください。</p>
<pre><code class="hljs language-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">metadata</span>: <span class="hljs-title class_">Metadata</span> = {
  <span class="hljs-attr">title</span>: <span class="hljs-string">`MY AWESOME SITE`</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">``</span>,
  <span class="hljs-attr">metadataBase</span>: <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'https://hogehoge.net/'</span>),
  <span class="hljs-attr">openGraph</span>: {
    <span class="hljs-attr">images</span>: <span class="hljs-string">'/assets/og.png'</span>,
  },
};
</code></pre>
<p>imagesの画像は実在してなくてもエラーにはなりません。<br>
以上によりさきほどのエラーは出なくなったはずです。</p>
<h2 id="ビルド">ビルド</h2>
<p>ターミナルでの実行は一旦終了します。キーボードのCtrl+Cを押してください。<br>
次にビルドを実行します。</p>
<pre><code class="hljs language-js">> npx next build
</code></pre>
<p>ビルドが完了するのを待ちます。Failed とか error という単語が表示されてなければ成功です。<br>
下記コマンドを実行し、ブラウザで<code>http://localhost:3000</code>を表示します。</p>
<pre><code class="hljs language-js">> npx next start
</code></pre>
<p>ブラウザでは正常に表示されますが、ターミナルには次のようなエラーが表示されていました。</p>
<p>For production Image Optimization with Next.js, the optional 'sharp' package is strongly recommended. Run 'npm i sharp', and Next.js will use it automatically for Image Optimization.</p>
<p>警告に従い、画像最適化のためのsharpパッケージをインストールします。<br>
Ctrl+Cで<code>npx next startを</code>一旦終了してから</p>
<pre><code class="hljs language-js">> npm i sharp
</code></pre>
<p>sharpをインストールできたら、再度ビルドからやり直します。</p>
<pre><code class="hljs language-js">> npx next build
> npx next start
</code></pre>
<p>ターミナルにエラーが表示されなくなったことを確認します。</p>
<p>参考: <a href="https://nextjs.org/docs/messages/sharp-missing-in-production">https://nextjs.org/docs/messages/sharp-missing-in-production</a></p>
<h2 id="静的エクスポート">静的エクスポート</h2>
<p>エクスポートするために下記コマンドを実行したところエラーが発生しました。</p>
<pre><code class="hljs language-js">> npx next <span class="hljs-keyword">export</span>
</code></pre>
<p>The "next export" command has been removed in favor of "output: export" in next.config.js. Learn more: <a href="https://nextjs.org/docs/advanced-features/static-html-export">https://nextjs.org/docs/advanced-features/static-html-export</a></p>
<p>このコマンドはNext.jsのv14.0から使用できなくなったようです。エクスポートするには設定ファイルを編集する必要があります。<br>
プロジェクトフォルダ直下(package.jsonと同じ場所)に「next.config.mjs」ファイルを作成します。</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">import('next').NextConfig</span>} */</span>

<span class="hljs-keyword">const</span> nextConfig = {
    <span class="hljs-attr">output</span>: <span class="hljs-string">"export"</span>,
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> nextConfig;
</code></pre>
<p>ドメイン下にサブパスが存在する場合、つまり<code>https://hogehoge.net</code>でなく<code>https://hogehoge.net/fuga</code>をサイトのルートにしたい場合は<code>basePath</code>を設定します。</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">import('next').NextConfig</span>} */</span>

<span class="hljs-keyword">const</span> nextConfig = {
    <span class="hljs-attr">output</span>: <span class="hljs-string">"export"</span>,
    <span class="hljs-attr">basePath</span>: <span class="hljs-string">"/fuga"</span>,
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> nextConfig;
</code></pre>
<p>これでビルドしたときにoutフォルダ内に静的コンテンツがエクスポートされるようになりました。</p>
<pre><code class="hljs language-js">> npx next build
</code></pre>
<p>静的エクスポートでは <code>npx next start</code> は使用できなくなります。<br>
代わりに以下のコマンドを実行すると、エクスポート結果が表示されます。</p>
<pre><code class="hljs language-js">> npx serve out
</code></pre>
<p>「OK to proceed?」には y を回答します。</p>
<p>ブラウザで確認するとカバーイメージが表示されていません。<br>
静的エクスポートではImage Optimizationを無効にする必要があるようです。<br>
先ほどの「next.config.mjs」を編集します。</p>
<pre><code class="hljs language-js"><span class="hljs-comment">/** <span class="hljs-doctag">@type</span> {<span class="hljs-type">import('next').NextConfig</span>} */</span>

<span class="hljs-keyword">const</span> nextConfig = {
    <span class="hljs-attr">output</span>: <span class="hljs-string">"export"</span>,
    <span class="hljs-attr">images</span>: {
        <span class="hljs-attr">unoptimized</span>: <span class="hljs-literal">true</span>
    },
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> nextConfig;
</code></pre>
<p>ビルドからやり直します。</p>
<pre><code class="hljs language-js">> npx next build
> npx serve out
</code></pre>
<p>表示結果が問題ないことを確認します。</p>
<h2 id="デプロイ">デプロイ</h2>
<p>outフォルダの中身を本番環境へアップロードします。</p>
<p>なお<code>Github Pages</code>にアップロードした場合は、Jekyllの働きにより<code>_next</code>フォルダが見えなくなって、CSSのスタイルが反映されないという問題が発生します。<br>
リポジトリのトップに<code>.nojekyll</code>という名前の空ファイルを作成することで解決します。Jekyllが働かなくなりスタイルが反映されます。</p></div></div></article></div><p class="bg-slate-300"></p></main><footer class="bg-bluelo text-white border-t border-neutral-200"><div class="container mx-auto py-5 px-5"><div class="py-28 flex flex-col lg:flex-row items-center"><h3 class="text-4xl lg:text-[2.5rem] font-bold tracking-tighter leading-tight text-center lg:text-left mb-10 lg:mb-0 lg:pr-4 lg:w-1/2">Statically Generated with Next.js.</h3><div class="flex flex-col lg:flex-row justify-center items-center lg:pl-4 lg:w-1/2"><a href="https://nextjs.org/docs/app/building-your-application/routing/pages-and-layouts" class="mx-3 bg-black hover:bg-white hover:text-black border border-black text-white font-bold py-3 px-12 lg:px-8 duration-200 transition-colors mb-6 lg:mb-0">Read Documentation</a><a href="https://github.com/vercel/next.js/tree/canary/examples/blog-starter" class="mx-3 font-bold hover:underline">View on GitHub</a></div></div></div></footer></div><script src="/_next/static/chunks/webpack-2e7fd9e6f08beff7.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/112d7583d07c4f20.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/_next/static/css/fb457670bfaeafb0.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"4:I[7690,[],\"\"]\n7:I[5613,[],\"\"]\n9:I[1778,[],\"\"]\na:I[5250,[\"250\",\"static/chunks/250-d7e0a94ebe194dac.js\",\"432\",\"static/chunks/app/(blog)/layout-4dbe9f485cf84522.js\"],\"\"]\n10:I[8955,[],\"\"]\n8:[\"slug\",\"nextjs_01\",\"d\"]\nb:{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"}\nc:{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"pad"])</script><script>self.__next_f.push([1,"ding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"}\nd:{\"display\":\"inline-block\"}\ne:{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0}\n11:[]\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/112d7583d07c4f20.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"p0Q3_gZ0V1i6bry-kEIPN\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/nextjs_01\",\"initialTree\":[\"\",{\"children\":[\"(blog)\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"nextjs_01\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"nextjs_01\\\"}\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"(blog)\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"nextjs_01\",\"d\"],{\"children\":[\"__PAGE__\",{},[\"$L5\",\"$L6\",null]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(blog)\",\"children\",\"posts\",\"children\",\"$8\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/fb457670bfaeafb0.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(blog)\",\"children\",\"posts\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}]]},[null,[\"$\",\"div\",null,{\"className\":\"min-h-screen\",\"children\":[[\"$\",\"header\",null,{\"className\":\"top-0 w-full py-6\",\"children\":[\"$\",\"div\",null,{\"className\":\"items-center p-4 justify-between flex\",\"children\":[[\"$\",\"div\",null,{\"className\":\"outer-title flex items-center\",\"children\":[[\"$\",\"svg\",null,{\"aria-hidden\":\"true\",\"focusable\":\"false\",\"data-prefix\":\"fas\",\"data-icon\":\"crow\",\"className\":\"svg-inline--fa fa-crow px-4 h-7 text-slate-400\",\"role\":\"img\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 640 512\",\"style\":{},\"children\":[\"$\",\"path\",null,{\"fill\":\"currentColor\",\"d\":\"M456 0c-48.6 0-88 39.4-88 88v29.2L12.5 390.6c-14 10.8-16.6 30.9-5.9 44.9s30.9 16.6 44.9 5.9L126.1 384H259.2l46.6 113.1c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3L311.1 384H352c1.1 0 2.1 0 3.2 0l46.6 113.2c5 12.3 19.1 18.1 31.3 13.1s18.1-19.1 13.1-31.3l-42-102C484.9 354.1 544 280 544 192V128v-8l80.5-20.1c8.6-2.1 13.8-10.8 11.6-19.4C629 52 603.4 32 574 32H523.9C507.7 12.5 483.3 0 456 0zm0 64a24 24 0 1 1 0 48 24 24 0 1 1 0-48z\",\"style\":{}}]}],[\"$\",\"$La\",null,{\"href\":\"/\",\"className\":\"hover:underline text-4xl font-bold\",\"children\":\"さんまや\"}]]}],[\"$\",\"input\",null,{\"id\":\"nav-input\",\"type\":\"checkbox\",\"className\":\"peer/link hidden\"}],[\"$\",\"nav\",null,{\"className\":\"hidden fixed text-lg font-bold right-0 top-20 p-3 peer-checked/link:block z-20\",\"children\":[\"$\",\"ul\",null,{\"className\":\"block text-slate-200 bg-[#333]\",\"children\":[[\"$\",\"li\",null,{\"className\":\"p-2 hover:underline\",\"children\":[\"$\",\"a\",null,{\"href\":\"/\",\"children\":\"さんまや\"}]}],[\"$\",\"li\",null,{\"className\":\"p-2 hover:underline\",\"children\":[\"$\",\"a\",null,{\"href\":\"/vbscript\",\"children\":\"VBScriptさんま屋\"}]}]]}]}],[\"$\",\"label\",null,{\"htmlFor\":\"nav-input\",\"className\":\"block peer-checked/link:hidden\",\"children\":[\"$\",\"svg\",null,{\"aria-hidden\":\"true\",\"focusable\":\"false\",\"data-prefix\":\"fas\",\"data-icon\":\"bars\",\"className\":\"svg-inline--fa fa-bars h-10 w-10\",\"role\":\"img\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 448 512\",\"style\":{},\"children\":[\"$\",\"path\",null,{\"fill\":\"currentColor\",\"d\":\"M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z\",\"style\":{}}]}]}],[\"$\",\"label\",null,{\"htmlFor\":\"nav-input\",\"className\":\"hidden peer-checked/link:block fixed right-4 z-30\",\"children\":[\"$\",\"svg\",null,{\"aria-hidden\":\"true\",\"focusable\":\"false\",\"data-prefix\":\"fas\",\"data-icon\":\"xmark\",\"className\":\"svg-inline--fa fa-xmark h-10 w-10\",\"role\":\"img\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 384 512\",\"style\":{},\"children\":[\"$\",\"path\",null,{\"fill\":\"currentColor\",\"d\":\"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z\",\"style\":{}}]}]}]]}]}],[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"(blog)\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}],[\"$\",\"footer\",null,{\"className\":\"bg-bluelo text-white border-t border-neutral-200\",\"children\":[\"$\",\"div\",null,{\"className\":\"container mx-auto py-5 px-5\",\"children\":[\"$\",\"div\",null,{\"className\":\"py-28 flex flex-col lg:flex-row items-center\",\"children\":[[\"$\",\"h3\",null,{\"className\":\"text-4xl lg:text-[2.5rem] font-bold tracking-tighter leading-tight text-center lg:text-left mb-10 lg:mb-0 lg:pr-4 lg:w-1/2\",\"children\":\"Statically Generated with Next.js.\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-col lg:flex-row justify-center items-center lg:pl-4 lg:w-1/2\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://nextjs.org/docs/app/building-your-application/routing/pages-and-layouts\",\"className\":\"mx-3 bg-black hover:bg-white hover:text-black border border-black text-white font-bold py-3 px-12 lg:px-8 duration-200 transition-colors mb-6 lg:mb-0\",\"children\":\"Read Documentation\"}],[\"$\",\"a\",null,{\"href\":\"https://github.com/vercel/next.js/tree/canary/examples/blog-starter\",\"className\":\"mx-3 font-bold hover:underline\",\"children\":\"View on GitHub\"}]]}]]}]}]}]]}],null]]},[null,[\"$\",\"html\",null,{\"lang\":\"ja\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"apple-touch-icon\",\"sizes\":\"180x180\",\"href\":\"/favicon/apple-touch-icon.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"32x32\",\"href\":\"/favicon/favicon-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"16x16\",\"href\":\"/favicon/favicon-16x16.png\"}],[\"$\",\"link\",null,{\"rel\":\"manifest\",\"href\":\"/favicon/site.webmanifest\"}],[\"$\",\"link\",null,{\"rel\":\"mask-icon\",\"href\":\"/favicon/safari-pinned-tab.svg\",\"color\":\"#000000\"}],[\"$\",\"link\",null,{\"rel\":\"shortcut icon\",\"href\":\"/favicon/favicon.ico\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-TileColor\",\"content\":\"#000000\"}],[\"$\",\"meta\",null,{\"name\":\"msapplication-config\",\"content\":\"/favicon/browserconfig.xml\"}],[\"$\",\"meta\",null,{\"name\":\"theme-color\",\"content\":\"#000\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"/feed.xml\"}]]}],[\"$\",\"body\",null,{\"className\":\"__className_aaf875\",\"children\":[\"$\",\"$L7\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":\"$b\",\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":\"$c\",\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":\"$d\",\"children\":[\"$\",\"h2\",null,{\"style\":\"$e\",\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]}]]}],null]],\"initialHead\":[false,\"$Lf\"],\"globalErrorComponent\":\"$10\",\"missingSlots\":\"$W11\"}]]\n"])</script><script>self.__next_f.push([1,"12:T3814,"])</script><script>self.__next_f.push([1,"\u003cnav class=\"toc\"\u003e\u003col class=\"toc-level toc-level-1\"\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#はじめに\"\u003eはじめに\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#nodejsをインストールする\"\u003eNode.jsをインストールする\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#nextプロジェクトを作成して表示する\"\u003eNextプロジェクトを作成して表示する\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#記事を追加してみる\"\u003e記事を追加してみる\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#metadata\"\u003eMetadata\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#ビルド\"\u003eビルド\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#静的エクスポート\"\u003e静的エクスポート\u003c/a\u003e\u003c/li\u003e\u003cli class=\"toc-item toc-item-h2\"\u003e\u003ca class=\"toc-link toc-link-h2\" href=\"#デプロイ\"\u003eデプロイ\u003c/a\u003e\u003c/li\u003e\u003c/ol\u003e\u003c/nav\u003e\u003ch2 id=\"はじめに\"\u003eはじめに\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://nextjs.org/\"\u003eNext.js\u003c/a\u003e の \u003ca href=\"https://vercel.com/templates/next.js/blog-starter-kit\"\u003eBlog Starter Kit\u003c/a\u003e を使ったブログサイト作成手順のメモです。\u003cbr\u003e\n一般のレンタルサーバにアップロード可能な静的コンテンツを作成します。\u003c/p\u003e\n\u003ch3 id=\"私の環境\"\u003e私の環境\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eOS: Windows 11 Home\u003c/li\u003e\n\u003cli\u003eターミナル: PowerShell(v7.4.2)\u003c/li\u003e\n\u003cli\u003eエディタ: Visual Studio Code\u003c/li\u003e\n\u003cli\u003eNode.js: v20.12.2\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"blog-starter-kit-とは\"\u003eBlog Starter Kit とは\u003c/h3\u003e\n\u003cp\u003eNext.jsには様々な\u003ca href=\"https://vercel.com/templates/next.js\"\u003eテンプレート\u003c/a\u003eが用意されており、\u003ccode\u003eBlog Starter Kit\u003c/code\u003e はブログ作成用テンプレートの一つです。簡易なマークダウンと\u003ccode\u003eTailwind CSS\u003c/code\u003eが使えます。\u003c/p\u003e\n\u003ch2 id=\"nodejsをインストールする\"\u003eNode.jsをインストールする\u003c/h2\u003e\n\u003cp\u003e以下の手順で、Node.jsをインストールします。\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003ca href=\"https://nodejs.org\"\u003ehttps://nodejs.org\u003c/a\u003e を表示します。\u003c/li\u003e\n\u003cli\u003eメニューの \u003ccode\u003edownload\u003c/code\u003e をクリックします。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003ePrebuilt Binaries\u003c/code\u003e をクリックします。\u003c/li\u003e\n\u003cli\u003e最新のLTSバージョン(今回はv20.12.2)、Windows、x64を選択します。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eDownload Node.js\u003c/code\u003e をクリックします。\u003c/li\u003e\n\u003cli\u003eダウンロードしたZIPファイルを展開します。\u003c/li\u003e\n\u003cli\u003e展開したフォルダを適当な場所へ配置します。ここではCドライブ直下に配置します。「C:\\node-v20.12.2-win-x64」直下にnode.exeが存在する状態です。\u003c/li\u003e\n\u003cli\u003eWindowsの検索ボックスに \u003ccode\u003eシステムの\u003c/code\u003e と入力します。\u003c/li\u003e\n\u003cli\u003e表示された \u003ccode\u003eシステムの詳細設定の表示\u003c/code\u003e をクリックします。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e環境変数\u003c/code\u003e をクリックします。\u003c/li\u003e\n\u003cli\u003e下側にあるシステム環境変数の \u003ccode\u003ePath\u003c/code\u003e を選択して \u003ccode\u003e編集\u003c/code\u003e をクリックします。\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003e新規\u003c/code\u003e をクリックして先ほどのフォルダのパスを入力します。ここでは「C:\\node-v20.12.2-win-x64」を入力します。\u003c/li\u003e\n\u003cli\u003eOKをクリックします。\u003c/li\u003e\n\u003cli\u003eターミナルを起動します。\u003c/li\u003e\n\u003cli\u003e下記コマンドによりバージョンが表示されれば成功です。\u003c/li\u003e\n\u003c/ol\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta prompt_\"\u003e\u003e \u003c/span\u003e\u003cspan class=\"bash\"\u003enode -v\u003c/span\u003e\nv20.12.2\n\u003cspan class=\"hljs-meta prompt_\"\u003e\u003e \u003c/span\u003e\u003cspan class=\"bash\"\u003enpm -v\u003c/span\u003e\n10.5.0\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"nextプロジェクトを作成して表示する\"\u003eNextプロジェクトを作成して表示する\u003c/h2\u003e\n\u003cp\u003e適当なフォルダへ移動します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003e\u003e \u003cspan class=\"hljs-built_in\"\u003ecd\u003c/span\u003e c:\\website\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eプロジェクトを作成します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-shell\"\u003e\u003cspan class=\"hljs-meta prompt_\"\u003e\u003e \u003c/span\u003e\u003cspan class=\"bash\"\u003enpx create-next-app --example blog-starter blog_starter_app\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eパッケージのインストールが必要と言われたら yes を回答します。\u003c/p\u003e\n\u003cp\u003e作成されたフォルダへ移動します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003e cd blog_starter_app\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e開発モードで実行します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003e npx next dev\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eブラウザで\u003ccode\u003ehttp://localhost:3000\u003c/code\u003eを表示して画面を確認してください。\u003c/p\u003e\n\u003ch2 id=\"記事を追加してみる\"\u003e記事を追加してみる\u003c/h2\u003e\n\u003cp\u003eプロジェクトのフォルダ内はこのようになってます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eBLOG_STARTER_APP\n│  .gitignore\n│  next-env.d.ts\n│  package-lock.json\n│  package.json\n│  postcss.config.js\n│  README.md\n│  tailwind.config.ts\n│  tsconfig.json\n│\n├─node_modules\n│  └─(省略)\n│\n├─public\n│  └─(省略)\n│\n├─src\n│  └─(省略)\n│\n└─_posts\n        dynamic-routing.md\n        hello-world.md\n        preview.md\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e「_posts」フォルダ内に拡張子.mdのファイルを作成すると記事が追加されます。\u003cbr\u003e\nサンプル記事が入ってますのでこれらを参考に記事を追加します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e---\n\u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"九龍風水傳\"\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003ecoverImage\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"/assets/blog/preview/cover.jpg\"\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003edate\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"1997-05-22T\"\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eauthor\u003c/span\u003e:\n  \u003cspan class=\"hljs-attr\"\u003ename\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"阿J\"\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003epicture\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"/assets/blog/authors/jj.jpeg\"\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eogImage\u003c/span\u003e:\n  \u003cspan class=\"hljs-attr\"\u003eurl\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"/img/gate.jpeg\"\u003c/span\u003e\n---\n\n## ファイアの日\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eブラウザをリロードして記事が追加されたことを確認してください。\u003c/p\u003e\n\u003ch2 id=\"metadata\"\u003eMetadata\u003c/h2\u003e\n\u003cp\u003eところで、ターミナルを確認すると下記のようなエラーが表示されていると思います。\u003c/p\u003e\n\u003cp\u003emetadata.metadataBase is not set for resolving social open graph or twitter images, using \"\u003ca href=\"http://localhost:3000\"\u003ehttp://localhost:3000\u003c/a\u003e\". See \u003ca href=\"https://nextjs.org/docs/app/api-reference/functions/generate-metadata#metadatabase\"\u003ehttps://nextjs.org/docs/app/api-reference/functions/generate-metadata#metadatabase\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eリンク先をヒントに「src/app/layout.tsx」を編集します。\u003cbr\u003e\n編集前はこうなってます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003emetadata\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eMetadata\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`Next.js Blog Example with \u003cspan class=\"hljs-subst\"\u003e${CMS_NAME}\u003c/span\u003e`\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`A statically generated blog example using Next.js and \u003cspan class=\"hljs-subst\"\u003e${CMS_NAME}\u003c/span\u003e.`\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003eopenGraph\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003eimages\u003c/span\u003e: [\u003cspan class=\"hljs-variable constant_\"\u003eHOME_OG_IMAGE_URL\u003c/span\u003e],\n  },\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003emetadataBaseの行を追加し、title、description、imagesも編集します。\u003cbr\u003e\n以下は例です。値は各自のサイトに合わせて編集してください。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003emetadata\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eMetadata\u003c/span\u003e = {\n  \u003cspan class=\"hljs-attr\"\u003etitle\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e`MY AWESOME SITE`\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003edescription\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e``\u003c/span\u003e,\n  \u003cspan class=\"hljs-attr\"\u003emetadataBase\u003c/span\u003e: \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eURL\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'https://hogehoge.net/'\u003c/span\u003e),\n  \u003cspan class=\"hljs-attr\"\u003eopenGraph\u003c/span\u003e: {\n    \u003cspan class=\"hljs-attr\"\u003eimages\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e'/assets/og.png'\u003c/span\u003e,\n  },\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eimagesの画像は実在してなくてもエラーにはなりません。\u003cbr\u003e\n以上によりさきほどのエラーは出なくなったはずです。\u003c/p\u003e\n\u003ch2 id=\"ビルド\"\u003eビルド\u003c/h2\u003e\n\u003cp\u003eターミナルでの実行は一旦終了します。キーボードのCtrl+Cを押してください。\u003cbr\u003e\n次にビルドを実行します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003e npx next build\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eビルドが完了するのを待ちます。Failed とか error という単語が表示されてなければ成功です。\u003cbr\u003e\n下記コマンドを実行し、ブラウザで\u003ccode\u003ehttp://localhost:3000\u003c/code\u003eを表示します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003e npx next start\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eブラウザでは正常に表示されますが、ターミナルには次のようなエラーが表示されていました。\u003c/p\u003e\n\u003cp\u003eFor production Image Optimization with Next.js, the optional 'sharp' package is strongly recommended. Run 'npm i sharp', and Next.js will use it automatically for Image Optimization.\u003c/p\u003e\n\u003cp\u003e警告に従い、画像最適化のためのsharpパッケージをインストールします。\u003cbr\u003e\nCtrl+Cで\u003ccode\u003enpx next startを\u003c/code\u003e一旦終了してから\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003e npm i sharp\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003esharpをインストールできたら、再度ビルドからやり直します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003e npx next build\n\u003e npx next start\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eターミナルにエラーが表示されなくなったことを確認します。\u003c/p\u003e\n\u003cp\u003e参考: \u003ca href=\"https://nextjs.org/docs/messages/sharp-missing-in-production\"\u003ehttps://nextjs.org/docs/messages/sharp-missing-in-production\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"静的エクスポート\"\u003e静的エクスポート\u003c/h2\u003e\n\u003cp\u003eエクスポートするために下記コマンドを実行したところエラーが発生しました。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003e npx next \u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe \"next export\" command has been removed in favor of \"output: export\" in next.config.js. Learn more: \u003ca href=\"https://nextjs.org/docs/advanced-features/static-html-export\"\u003ehttps://nextjs.org/docs/advanced-features/static-html-export\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eこのコマンドはNext.jsのv14.0から使用できなくなったようです。エクスポートするには設定ファイルを編集する必要があります。\u003cbr\u003e\nプロジェクトフォルダ直下(package.jsonと同じ場所)に「next.config.mjs」ファイルを作成します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/** \u003cspan class=\"hljs-doctag\"\u003e@type\u003c/span\u003e {\u003cspan class=\"hljs-type\"\u003eimport('next').NextConfig\u003c/span\u003e} */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e nextConfig = {\n    \u003cspan class=\"hljs-attr\"\u003eoutput\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"export\"\u003c/span\u003e,\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e nextConfig;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eドメイン下にサブパスが存在する場合、つまり\u003ccode\u003ehttps://hogehoge.net\u003c/code\u003eでなく\u003ccode\u003ehttps://hogehoge.net/fuga\u003c/code\u003eをサイトのルートにしたい場合は\u003ccode\u003ebasePath\u003c/code\u003eを設定します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/** \u003cspan class=\"hljs-doctag\"\u003e@type\u003c/span\u003e {\u003cspan class=\"hljs-type\"\u003eimport('next').NextConfig\u003c/span\u003e} */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e nextConfig = {\n    \u003cspan class=\"hljs-attr\"\u003eoutput\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"export\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ebasePath\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"/fuga\"\u003c/span\u003e,\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e nextConfig;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eこれでビルドしたときにoutフォルダ内に静的コンテンツがエクスポートされるようになりました。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003e npx next build\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e静的エクスポートでは \u003ccode\u003enpx next start\u003c/code\u003e は使用できなくなります。\u003cbr\u003e\n代わりに以下のコマンドを実行すると、エクスポート結果が表示されます。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003e npx serve out\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e「OK to proceed?」には y を回答します。\u003c/p\u003e\n\u003cp\u003eブラウザで確認するとカバーイメージが表示されていません。\u003cbr\u003e\n静的エクスポートではImage Optimizationを無効にする必要があるようです。\u003cbr\u003e\n先ほどの「next.config.mjs」を編集します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003cspan class=\"hljs-comment\"\u003e/** \u003cspan class=\"hljs-doctag\"\u003e@type\u003c/span\u003e {\u003cspan class=\"hljs-type\"\u003eimport('next').NextConfig\u003c/span\u003e} */\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e nextConfig = {\n    \u003cspan class=\"hljs-attr\"\u003eoutput\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"export\"\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003eimages\u003c/span\u003e: {\n        \u003cspan class=\"hljs-attr\"\u003eunoptimized\u003c/span\u003e: \u003cspan class=\"hljs-literal\"\u003etrue\u003c/span\u003e\n    },\n};\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e nextConfig;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eビルドからやり直します。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-js\"\u003e\u003e npx next build\n\u003e npx serve out\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e表示結果が問題ないことを確認します。\u003c/p\u003e\n\u003ch2 id=\"デプロイ\"\u003eデプロイ\u003c/h2\u003e\n\u003cp\u003eoutフォルダの中身を本番環境へアップロードします。\u003c/p\u003e\n\u003cp\u003eなお\u003ccode\u003eGithub Pages\u003c/code\u003eにアップロードした場合は、Jekyllの働きにより\u003ccode\u003e_next\u003c/code\u003eフォルダが見えなくなって、CSSのスタイルが反映されないという問題が発生します。\u003cbr\u003e\nリポジトリのトップに\u003ccode\u003e.nojekyll\u003c/code\u003eという名前の空ファイルを作成することで解決します。Jekyllが働かなくなりスタイルが反映されます。\u003c/p\u003e"])</script><script>self.__next_f.push([1,"6:[\"$\",\"main\",null,{\"children\":[[\"$\",\"div\",null,{\"className\":\"container mx-auto py-5 px-5\",\"children\":[\"$\",\"article\",null,{\"className\":\"mb-32\",\"children\":[[[\"$\",\"h1\",null,{\"className\":\" text-slate-400 text-5xl md:text-7xl lg:text-8xl  font-bold tracking-tighter leading-tight md:leading-none mb-12 \",\"children\":\"Next.jsを使って静的なブログサイトを作成する(1)\"}],[\"$\",\"div\",null,{\"className\":\"max-w-2xl mx-auto\",\"children\":[\"$\",\"div\",null,{\"className\":\"mb-6 text-lg\",\"children\":[\"$\",\"time\",null,{\"dateTime\":\"2024-06-10T23:00:00.000Z\",\"children\":\"2024-06-11\"}]}]}]],[\"$\",\"div\",null,{\"className\":\"max-w-2xl mx-auto\",\"children\":[\"$\",\"div\",null,{\"className\":\"markdown-styles_markdown__ORfR8\",\"dangerouslySetInnerHTML\":{\"__html\":\"$12\"}}]}]]}]}],[\"$\",\"p\",null,{\"className\":\"bg-slate-300\"}]]}]\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Next.jsを使って静的なブログサイトを作成する(1)\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"コンピュータその他いろいろ\"}],[\"$\",\"meta\",\"4\",{\"property\":\"og:title\",\"content\":\"Next.jsを使って静的なブログサイトを作成する(1)\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:description\",\"content\":\"コンピュータその他いろいろ\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:image\",\"content\":\"https://www.sammaya.jp/assets/img/hero/hong-kong.jpg\"}],[\"$\",\"meta\",\"7\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"8\",{\"name\":\"twitter:title\",\"content\":\"Next.jsを使って静的なブログサイトを作成する(1)\"}],[\"$\",\"meta\",\"9\",{\"name\":\"twitter:description\",\"content\":\"コンピュータその他いろいろ\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:image\",\"content\":\"https://www.sammaya.jp/assets/img/hero/hong-kong.jpg\"}]]\n"])</script><script>self.__next_f.push([1,"5:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>